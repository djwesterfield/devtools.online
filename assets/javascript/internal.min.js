window.mobile={android:function(){return navigator.userAgent.match(/Android/i)},blkbry:function(){return navigator.userAgent.match(/BlackBerry/i)},ios:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},ie:function(){return navigator.userAgent.match(/IEMobile/i)},desktop:function(){return $(window).width()<600?!0:!1},any:function(){return window.mobile.android()||window.mobile.blkbry()||window.mobile.ios()||window.mobile.ie()||window.mobile.desktop()}},function(a,b){"use strict";a.Title="DevTools Online",a.Description="A massive collection of online web development tools",a.Timestamp=+new Date,a.Location=window.productionMode?"https://www.devtools.online/":"http://localhost/devtools.online/",a.Firebase=new Firebase("https://devtoolsonline.firebaseio.com/"),a.Authenticated,a.User,a.Category="design",a.Filter="all",a.Sort="likes:desc",a.Tag="mobile",a.Search=null,a.Tool=null;var c=window.mobile.any(),d=b(window),e=b("#main"),f=(b("#content"),b("#twitter-login")),g=b("#logout"),h=b(".tool-sort"),i=b("#user-info"),j=b("#user-avatar"),k=b("#user-name"),l=b("#content-header"),m=b("#tools-list"),n=b("#toggle-mobile-menu"),o=b("aside"),p=b("#search-input"),q=b("#category-nav"),m=b("#tools-list"),r=b("#tag-nav"),s=b("#tool-info"),t=null,u=null,v=null,w=null;a.handler=function(){function x(){var x=this;this.promptLogin=function(){alert("Please sign in with your Twitter account first.")};var y=function(a){a=a?a:10;for(var b="",c=0;a>c;c++)b+=Math.floor(9*Math.random()+1);return b},z=function(a){return a.replace(/\s+/g,"-").toLowerCase()},A=function(a){var c="";return b.each(a,function(a,b){c+=b+" "}),c};return this.toggleGoogleAds=function(){c||(window.size.x>=1200,window.size.x>=800,window.size.x>=600)},this.addNewTool=function(){var b={name:null,hash:null,category:a.Category,tags:a.Tag,url:a.Location,image:"https://placehold.it/1024x720"};if(a.Authenticated){var c=prompt("Name the tool:");if(c){b.name=c,b.hash=z(b.name);var d=prompt("What is the tools category:",b.category);if(d){b.category=d;var e=prompt("Tag this tool:",b.tags);if(e){b.tags=e.split(",");var f=prompt("What is the tools URL:",b.url);if(f){b.url=f;var g=prompt("What is the thumbnail URL:",b.image);g&&(b.image=g,a.Firebase.child("tools/"+y(10)).set({addedBy:a.User.id,name:b.name,hash:b.hash,tags:b.tags,category:b.category,thumbnail:b.image,url:b.url,showRef:!0,visible:!0,likes:0,favorites:0}))}}}}}},this.runCallback=function(a){a&&"function"==typeof a&&a()},this.updateURL=function(){var b=a.Category?a.Category+"/":"",c=a.Tag?a.Tag+"/":"",d=a.Tool?a.Tool+"/":"",e=b+c+d;a.Filter="everything"===a.Tag?"."+a.Category+", all":"."+a.Category+"."+a.Tag,window.location.hash="!/"+e,m.mixItUp("filter",a.Filter)},this.checkURL=function(c){if(window.location.hash){var d=window.location.hash.split("/");a.Category=d[1]?d[1].toString():"",a.Tag=d[2]?d[2].toString():"",a.Tool=d[3]?d[3].toString():"",b(".tool-link").each(function(){var c=b(this),d=c.data("tool");c.attr("href",a.Location+"#!/"+a.Category+"/"+a.Tag+"/"+d+"/")}),a.Filter="everything"===a.Tag?"."+a.Category+", all":"."+a.Category+"."+a.Tag,a.Tool?x.loadTool(a.Tool):x.unloadTool()}else window.location.hash="!/development/everything/";x.runCallback(c)},this.loadTool=function(b){x.hideTools(function(){s.addClass("visible")}),a.Firebase.child("tools").orderByChild("hash").equalTo(b).once("value",function(a){console.log("tool found: "+a.val())})},this.unloadTool=function(){s.removeClass("visible")},this.scrollToTop=function(a){x.runCallback(a)},this.loadCategories=function(c){a.Firebase.child("categories").once("value",function(d){var e=Object.keys(d.val()).length,f=0;b.each(d.val(),function(d,g){if(f++,g.visible===!0){var h='<li><a class="category-selector tool-filter pointer" href="'+a.Location+"#!/"+g.hash+'/everything/" data-active="false" data-filter=".'+g.hash+'"><i class="fa fa-'+g.icon+'"></i>'+g.name+"</a></li>";q.append(h)}if(g.tags&&g.visible===!0){{g.tags.length}b.each(g.tags,function(c,d){var e="everything"===d.hash?"all, ."+g.hash:"."+g.hash+"."+d.hash;if(0===b('.tag-selector[data-category="'+g.hash+'"][data-tag="'+d.hash+'"]').length){var f='<li><a class="tag-selector pointer tool-filter" href="'+a.Location+"#!/"+g.hash+"/"+d.hash+'/" data-active="false" data-category="'+g.hash+'" data-filter="'+e+'" data-tag="'+d.hash+'"><label>'+d.name+"<span>0</span></label></a></li>";r.append(f),u=b(".tag-selector")}})}f>=e&&(t=b(".category-selector"),x.runCallback(c))})})},this.hideTools=function(a){m.mixItUp("filter","none",function(){x.runCallback(a)})},b.fn.openTool=function(){return this.on("click",function(){var c=b(this),d=(c.closest(".tool").data("id"),c.closest(".tool").data("hash"));a.Tool=d,x.loadTool(a.Tool)})},this.loadTools=function(c){a.Firebase.child("tools").once("value",function(d){var e=Object.keys(d.val()).length,f=0;b.each(d.val(),function(d,g){a.Firebase.child("users/"+g.addedBy).once("value",function(h){f++;var i=(h.val().devtools_data.displayName,g.info?g.info:"Update me"),j=g.info?g.info:g.name,k=A(g.tags),l=function(){var c="";return b.each(g.tags,function(b,d){c+='<a itemprop="relatedLink genre" class="tool-filter" data-filter=".'+g.category+"."+d+'" href="'+a.Location+"#!/"+g.category+"/"+d+'/">#'+d+"</a>"}),c},n=g.likes<1?"Be the first to like this tool":"Like this tool",o=encodeURIComponent(i.trim()),p=g.showRef===!0?g.url+"?ref=devtools":g.url,q='<li itemscope itemtype="http://schema.org/WebPage" class="mix '+g.category+" "+k+" "+g.hash+'" data-likes="'+g.likes+'" data-saves="'+g.favorites+'"><div class="tool" data-id="'+d+'" data-hash="'+g.hash+'" data-category="'+g.category+'" data-tags="'+g.tags+'">';q+='<div class="thumbnail" style="/*background-image:url('+g.thumbnail+');*/">',q+='<div class="thumb-actions">',q+='<a title="'+g.url+'" href="'+p+'" rel="external" target="new"><i class="fa fa-link"></i></a>',q+='<a class="more-info tool-link" data-tool="'+g.hash+'" href="'+a.Location+"#!/"+a.Category+"/"+a.Tag+"/"+g.hash+'/" title="More information about '+g.name+'"><i class="fa fa-info"></i></a>',q+="</div>",q+='<img alt="'+j+'" src="'+g.thumbnail+'">',q+="</div>",q+='<div itemprop="mainContentOfPage" class="details">',q+='<h2><a itemprop="significantLink" class="tool-link" href="'+p+'" rel="external" target="new" title="'+g.url+'">'+g.name+"</a></h2>",q+="<p>"+l()+"</p>",q+='<p itemprop="about" class="short-description edit-desc" title="'+i+'">'+i+"</p>",q+="</div>",q+='<nav class="actions">',q+='<li title="'+n+'"><button class="tool-action" data-action="heart"><i class="heart"></i><span>'+g.likes+"</span></button></li>",q+='<li title="Add this tool to your favorites"><button class="tool-action" data-action="favorite"><i class="fa fa-bookmark-o"></i><span>'+g.favorites+"</span></button></li>",q+='<li title="Share '+g.name+' on Twitter"><button class="tool-action" data-action="share" data-url="http://twitter.com/share?text='+o+"&url="+p+'&via=devtoolsonline"><i class="fa fa-share-alt"></i><span>Share</span></button></li>',q+="</nav>",q+="</div></li>",g.visible&&m.append(q),f>=e&&(v=b(".tool-action"),w=b(".more-info"),x.runCallback(c))})})})},this.showUserLikesAndFavorites=function(){a.Authenticated&&a.Firebase.child("users/"+a.User.id).once("value",function(a){var c=a.val().likes,d=a.val().favorites;c&&b.each(c,function(a){b('.tool[data-id="'+a+'"]').find('.tool-action[data-action="heart"]').toggleActionStatus("like")}),d&&b.each(d,function(a){b('.tool[data-id="'+a+'"]').find('.tool-action[data-action="favorite"]').toggleActionStatus("favorite")})})},this.authenticated=function(b,c){switch(f.hide(),g.hide(),b){case!0:a.Authenticated=!0,a.User=c.twitter,f.hide(),g.show(),k.text(c.twitter.displayName),j.attr("src",c.twitter.profileImageURL),i.show(),a.Firebase.child("users/"+c.twitter.id).once("value",function(b){b.exists()||a.Firebase.child("users/"+c.twitter.id).set({devtools_data:{level:0,username:c.twitter.username,displayName:c.twitter.displayName,avatar:c.twitter.profileImageURL},twitter_data:{username:c.twitter.username,displayName:c.twitter.displayName,avatar:c.twitter.profileImageURL}})});break;default:i.hide(),k.text(""),j.attr("src",""),g.hide(),f.show(),a.Firebase.unauth(),a.Authenticated=!1,a.User=null,x.clearLikesAndFavorites()}},this.addNewCategory=function(){var b=prompt("Name the category:");b&&a.Firebase.child("categories/"+y(10)).set({name:b,hash:z(b),icon:"circle-o"})},this.addNewTag=function(){var c=prompt("Name the tag:");c&&a.Firebase.child("categories").orderByChild("hash").equalTo(a.Category).once("value",function(d){b.each(d.val(),function(b){a.Firebase.child("categories/"+b+"/tags/"+y(10)).set({name:c,hash:z(c)})})})},this.clearLikesAndFavorites=function(){v&&(v.hasClass("liked")&&v.removeClass("liked"),v.hasClass("favorited")&&v.removeClass("favorited")),b('.tool-action[data-action="heart"] .fa').removeClass("fa-heart").addClass("fa-heart-o"),b('.tool-action[data-action="favorite"] .fa').removeClass("fa-star").addClass("fa-star-o")},b.fn.toggleActionStatus=function(a){var c=b(this);switch(a){case"like":c.toggleClass("liked"),c.find(".heart").toggleClass("throb");break;case"favorite":c.toggleClass("favorited"),c.find(".fa").toggleClass("fa-bookmark-o").toggleClass("fa-bookmark");break;case"share":alert("SHARED!")}},this.addToolValue=function(b,c,d){"all"===b?a.Firebase.child("tools").once("value",function(b){b.forEach(function(b){a.Firebase.child("tools/"+b.key()+"/"+c).set(d)})}):a.Firebase.child("tools/"+b+"/"+c).set(d)},this.performAction=function(b,c,e){var f=function(b,c){b.toggleActionStatus("like"),a.Firebase.child("tools/"+c).once("value",function(d){var e=d.val().likes,f=e;b.hasClass("liked")?f++:f--,f=0>f?0:f,b.find("span").text(f),a.Firebase.child("tools/"+c+"/likes/").set(f)}),a.Firebase.child("users/"+a.User.id+"/likes/").once("value",function(b){b.hasChild(c.toString())?a.Firebase.child("users/"+a.User.id+"/likes/"+c).remove():a.Firebase.child("users/"+a.User.id+"/likes/"+c).set(!0)})},g=function(b,c){b.toggleActionStatus("favorite"),a.Firebase.child("tools/"+c).once("value",function(d){var e=d.val().favorites,f=e;b.hasClass("favorited")?f++:f--,f=0>f?0:f,b.find("span").text(f),a.Firebase.child("tools/"+c+"/favorites/").set(f)}),a.Firebase.child("users/"+a.User.id+"/favorites/").once("value",function(b){b.hasChild(c.toString())?a.Firebase.child("users/"+a.User.id+"/favorites/"+c).remove():a.Firebase.child("users/"+a.User.id+"/favorites/"+c).set(!0)})},h=function(a){var b=a.data("url"),c={x:575,y:400},e={x:(d.width()-c.x)/2,y:(d.height()-c.y)/2},f="status=1,width="+c.x+",height="+c.y+",top="+e.y+",left="+e.x;window.open(b,"twitter",f)};switch(c){case"heart":a.Authenticated?f(b,e):x.promptLogin();break;case"favorite":a.Authenticated?g(b,e):x.promptLogin();break;case"share":h(b,e)}},this.updateCategory=function(){a.Tool=null,t.attr("data-active",!1),b('.category-selector[data-filter=".'+a.Category+'"]').attr("data-active",!0),e.attr("data-category","."+a.Category),l.find("#category").text(a.Category),b(".tag-selector").removeClass("visible"),b('.tag-selector[data-filter="'+a.Category+'"]').addClass("visible")},b.fn.categoryUpdateHandler=function(){return this.on("click tap",function(){var c=b(this).data("filter");a.Category=c,x.updateCategory(),x.scrollToTop(function(){Pace.restart()}),x.updateURL()})},this.updateTag=function(){a.Tool=null,u.attr("data-active",!1).hide(),b('.tag-selector[data-category="'+a.Category+'"]').show(),b('.tag-selector[data-category="'+a.Category+'"][data-tag="'+a.Tag+'"]').attr("data-active",!0),l.find("#tag").text("#"+a.Tag.replace("-"," "))},b.fn.tagUpdateHandler=function(){return this.on("click tap",function(){a.Tag=b(this).data("tag"),x.updateTag(),x.scrollToTop(function(){Pace.restart()}),x.updateURL()})},x.sortTools=function(){m.mixItUp("sort",a.Sort+":desc")},b.fn.sortHandler=function(){return b.each(this,function(){b(this).on("click tap",function(c){c.preventDefault();var d=b(this);a.Sort=d.data("sort"),h.attr("data-active",!1),d.attr("data-active",!0),x.sortTools()})})},b.fn.actionHandler=function(){return b.each(this,function(){b(this).on("click tap",function(a){a.preventDefault();var c=b(this),d=c.closest(".tool").data("id"),e=c.data("action");x.performAction(c,e,d)})})},b.fn.logoutHandler=function(){return this.on("click tap",function(){a.Authenticated&&(x.authenticated(!1),location.reload())})},b.fn.loginHandler=function(){return this.on("click tap",function(){a.Authenticated?printError("Already logged in as:",authData.twitter.displayName):a.Firebase.authWithOAuthPopup("twitter",function(a,b){!a&&b?(x.authenticated(!0,b),location.reload()):x.authenticated(!1)})})},this.buildPage=function(){return d.on("load hashchange resize",function(c){window.size={x:d.width(),y:d.height()},x.toggleGoogleAds(),"load"===c.type&&(b("a").on("click tap",function(a){a.preventDefault()}),n.on("click tap",function(a){a.preventDefault(),o.toggleClass("visible")}),x.checkURL(function(){i.logoutHandler(),f.loginHandler(),x.loadCategories(function(){a.Category&&x.updateCategory(),a.Tag&&x.updateTag(),b("#add-tag").on("click",function(){x.addNewTag()}),b("#add-tool").on("click",function(){x.addNewTool()})}),x.loadTools(function(){h.sortHandler(),v.actionHandler(),w.openTool(),b(".edit-desc").on("click",function(){if(a.Authenticated){var c=b(this).closest(".tool").data("id"),d=b(this).text(),e=prompt("Write a short description for this tool:",d);e&&a.Firebase.child("tools/"+c+"/info").set(e)}else x.promptLogin()}),m.mixItUp({load:{sort:a.Sort,filter:a.Filter},animation:{enable:!0,effects:"fade stagger"},selectors:{target:".mix",filter:".tool-filter",sort:".tool-sort"}}).on("mixEnd",function(a,b){var c=b.totalShow;console.log(c&&0!=c?c+" TOOLS FOUND!":"NO TOOLS FOUND!")}),p.typeWatch({wait:500,captureLength:3,callback:function(b){b?(a.Search=b.replace(/ /g,"-"),a.Search&&""!=a.Seach?(l.find("#category").text("Search"),l.find("#tag").text("#"+a.Search),m.mixItUp("filter","."+a.Search).on("mixEnd",function(a,b){var c=b.totalShow;console.log(c&&0!=c?c+" TOOLS FOUND!":"NO TOOLS FOUND!")})):m.mixItUp("filter",a.Filter)):m.mixItUp("filter",a.Filter)}}),a.Authenticated&&x.showUserLikesAndFavorites()})}),a.Firebase.onAuth(function(b){a.Authenticated=b?!0:!1,a.Authenticated?x.authenticated(!0,b):x.authenticated(!1)})),"hashchange"===c.type&&(c.preventDefault(),x.checkURL(function(){Pace.restart(),a.Category&&x.updateCategory(),a.Tag&&x.updateTag(),x.scrollToTop(function(){m.mixItUp("filter",a.Filter)})}))}),this},this.buildPage()}return new x}()}(window.DevTools=window.DevTools||{},jQuery);