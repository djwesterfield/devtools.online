window.mobile={android:function(){return navigator.userAgent.match(/Android/i)},blkbry:function(){return navigator.userAgent.match(/BlackBerry/i)},ios:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},ie:function(){return navigator.userAgent.match(/IEMobile/i)},desktop:function(){return $(window).width()<600?!0:!1},any:function(){return window.mobile.android()||window.mobile.blkbry()||window.mobile.ios()||window.mobile.ie()||window.mobile.desktop()}},function(a,b){"use strict";a.Title="DevTools Online",a.Description="A massive online collection of tools, links, and resources for web designers & developers.",a.Timestamp=+new Date,a.Location=window.productionMode?"https://www.devtools.online/":"http://hackerspace/devtools.online/",a.Firebase=new Firebase("https://devtoolsonline.firebaseio.com/"),a.Authenticated,a.User,a.Category="design",a.Filter="all",a.Sort="likes:desc",a.Tag="mobile",a.Search=null,a.Tool=null;var c=window.mobile.any(),d=b(window),e=b("#main"),f=(b("#content"),b(".auth-button")),g=b("#site-login"),h=(b("#site-logout"),b(".tool-sort")),i=b("#user-info"),j=b("#user-avatar"),k=b("#user-name"),l=b("#content-header"),m=b("#tools-list"),n=b("#toggle-mobile-menu"),o=b("aside"),p=b("#modal-container"),q=b(".close-modal"),r=b(".modal-window"),s=(b("#about-prompt"),b("#login-prompt")),t=b("#search-input"),u=b("#category-nav"),m=b("#tools-list"),v=b("#tag-nav"),w=(b("#tool-info"),null),x=null,y=null,z=null,A=b("#fourohfour");a.handler=function(){function B(){var B=this;this.promptLogin=function(){B.openModalWindow(s,function(){f.authHandler()})};var C=function(a){var c="";return b.each(a,function(a,b){c+=b+" "}),c};return this.toggleGoogleAds=function(){c||(window.size.x>=1200,window.size.x>=800,window.size.x>=600)},this.runCallback=function(a){a&&"function"==typeof a&&a()},this.updateURL=function(){var b=a.Category?a.Category+"/":"",c=a.Tag?a.Tag+"/":"",d=a.Tool?a.Tool+"/":"",e=b+c+d;a.Filter="everything"===a.Tag?"."+a.Category+", all":"."+a.Category+"."+a.Tag,window.location.hash="!/"+e,m.mixItUp("filter",a.Filter)},this.checkURL=function(b){if(window.location.hash){var c=window.location.hash.split("/");a.Category=c[1]?c[1].toString():"",a.Tag=c[2]?c[2].toString():"",a.Filter="everything"===a.Tag?"."+a.Category+", all":"."+a.Category+"."+a.Tag}else window.location.hash="!/development/everything/";B.runCallback(b)},this.scrollToTop=function(a){B.runCallback(a)},this.loadCategories=function(c){var d=[];a.Firebase.child("categories").once("value",function(e){var f=Object.keys(e.val()).length,g=0;b.each(e.val(),function(a,b){d[b.order]={id:a,data:b}}),b.each(d,function(d,e){if(g++,e.data.visible===!0){var h='<li><a class="category-selector tool-filter pointer" href="'+a.Location+"#!/"+e.data.hash+'/everything/" data-active="false" data-filter=".'+e.data.hash+'"><i class="fa fa-'+e.data.icon+'"></i>'+e.data.name+"</a></li>";u.append(h)}if(e.data.tags&&e.data.visible===!0){var i=(e.data.tags.length,[]);b.each(e.data.tags,function(a,b){i[b.order]={id:a,data:b}}),b.each(i,function(c,d){var f="everything"===d.data.hash?"all, ."+e.data.hash:"."+e.data.hash+"."+d.data.hash;if(0===b('.tag-selector[data-category="'+e.data.hash+'"][data-tag="'+d.data.hash+'"]').length){var g='<li><a class="tag-selector pointer tool-filter" href="'+a.Location+"#!/"+e.data.hash+"/"+d.data.hash+'/" data-active="false" data-category="'+e.data.hash+'" data-filter="'+f+'" data-tag="'+d.data.hash+'"><label>'+d.data.name+"<span>0</span></label></a></li>";v.append(g),x=b(".tag-selector")}})}g>=f&&(w=b(".category-selector"),B.runCallback(c))})})},this.hideTools=function(a){m.mixItUp("filter","none",function(){B.runCallback(a)})},b.fn.openTool=function(){return this.on("click",function(){var c=b(this),d=(c.closest(".tool").data("id"),c.closest(".tool").data("hash"));a.Tool=d,B.loadTool(a.Tool)})},this.loadTools=function(c){a.Firebase.child("tools").once("value",function(d){var e=Object.keys(d.val()).length,f=0;b.each(d.val(),function(d,g){a.Firebase.child("users/"+g.addedBy).once("value",function(h){f++;var i=(h.val().devtools_data.displayName,g.info?g.info:"Update me"),j=g.info?g.info:g.name,k=C(g.tags),l=function(){var c="";return b.each(g.tags,function(b,d){c+='<a itemprop="relatedLink genre" class="tool-filter" data-filter=".'+g.category+"."+d+'" href="'+a.Location+"#!/"+g.category+"/"+d+'/">#'+d+"</a>"}),c},n=g.likes<1?"Be the first to like this tool":"Like this tool",o=encodeURIComponent(i.trim()),p=g.showRef===!0?g.url+"?ref=devtools":g.url,q='<li itemscope itemtype="http://schema.org/WebPage" class="mix '+g.category+" "+k+" "+g.hash+'" data-likes="'+g.likes+'" data-saves="'+g.favorites+'"><div class="tool" data-id="'+d+'" data-hash="'+g.hash+'" data-category="'+g.category+'" data-tags="'+g.tags+'">';q+='<div class="thumbnail" style="/*background-image:url('+g.thumbnail+');*/">',q+='<div class="thumb-actions">',q+='<a title="'+g.url+'" href="'+p+'" rel="external" target="'+g.name+'"><i class="fa fa-link"></i></a>',q+='<a class="more-info tool-link" data-tool="'+g.hash+'" href="'+a.Location+"#!/"+a.Category+"/"+a.Tag+"/"+g.hash+'/" title="More information about '+g.name+'"><i class="fa fa-info"></i></a>',q+="</div>",q+='<img alt="'+j+'" src="'+g.thumbnail+'">',q+="</div>",q+='<div itemprop="mainContentOfPage" class="details">',q+='<h2><a itemprop="significantLink" class="tool-link" href="'+p+'" rel="external" target="'+g.name+'" title="'+g.url+'">'+g.name+"</a></h2>",q+="<p>"+l()+"</p>",q+='<p itemprop="about" class="short-description edit-desc" title="'+i+'">'+i+"</p>",q+="</div>",q+='<nav class="actions">',q+='<li title="'+n+'"><button class="tool-action" data-action="heart"><div class="action-button-content"><i class="heart"></i><span>'+g.likes+"</span></div></button></li>",q+='<li title="Share '+g.name+' on Twitter"><button class="tool-action" data-action="share" data-url="http://twitter.com/share?text='+o+"&url="+p+'&via=devtoolsonline"><div class="action-button-content"><i class="fa fa-share-alt"></i><span>Share</span></div></button></li>',q+="</nav>",q+="</div></li>",g.visible&&m.append(q),f>=e&&(y=b(".tool-action"),z=b(".more-info"),B.runCallback(c))})})})},this.showUserLikesAndFavorites=function(){a.Authenticated&&a.Firebase.child("users/"+a.User.id).once("value",function(a){var c=a.val().likes,d=a.val().favorites;c&&b.each(c,function(a){b('.tool[data-id="'+a+'"]').find('.tool-action[data-action="heart"]').toggleActionStatus("like")}),d&&b.each(d,function(a){b('.tool[data-id="'+a+'"]').find('.tool-action[data-action="favorite"]').toggleActionStatus("favorite")})})},this.authenticated=function(b,c){switch(b){case!0:a.Authenticated=!0;var d,e,f,h;switch(c.provider){case"twitter":a.User=c.twitter,d=a.User.id,e=a.User.username,f=a.User.displayName,h=a.User.profileImageURL;break;case"google":a.User=c.google,d=a.User.id,e=a.User.displayName,f=a.User.displayName,h=a.User.profileImageURL;break;case"github":a.User=c.github,d=a.User.id,e=a.User.username,f=a.User.displayName,h=a.User.profileImageURL}p.attr("data-visible","false"),s.remove(),k.text(f),j.attr("src",h),g.hide(),i.show(),a.Firebase.child("users/"+d).once("value",function(b){b.exists()||a.Firebase.child("users/"+d).set({devtools_data:{level:0,username:e,displayName:f,avatar:h},auth_data:{username:e,displayName:f,avatar:h}})});break;default:i.hide(),g.show(),k.text(""),j.attr("src",""),a.Firebase.unauth(),a.Authenticated=!1,a.User=null,B.clearLikesAndFavorites()}},this.clearLikesAndFavorites=function(){y&&(y.hasClass("liked")&&y.removeClass("liked"),y.hasClass("favorited")&&y.removeClass("favorited")),b('.tool-action[data-action="heart"] .fa').removeClass("fa-heart").addClass("fa-heart-o"),b('.tool-action[data-action="favorite"] .fa').removeClass("fa-star").addClass("fa-star-o")},b.fn.toggleActionStatus=function(a){var c=b(this);switch(a){case"like":c.toggleClass("liked"),c.find(".heart").toggleClass("throb");break;case"favorite":c.toggleClass("favorited"),c.find(".fa").toggleClass("fa-bookmark-o").toggleClass("fa-bookmark");break;case"share":alert("SHARED!")}},this.addToolValue=function(b,c,d){"all"===b?a.Firebase.child("tools").once("value",function(b){b.forEach(function(b){a.Firebase.child("tools/"+b.key()+"/"+c).set(d)})}):a.Firebase.child("tools/"+b+"/"+c).set(d)},this.performAction=function(b,c,e){var f=function(b,c){b.toggleActionStatus("like"),a.Firebase.child("tools/"+c).once("value",function(d){var e=d.val().likes,f=e;b.hasClass("liked")?f++:f--,f=0>f?0:f,b.find("span").text(f),a.Firebase.child("tools/"+c+"/likes/").set(f)}),a.Firebase.child("users/"+a.User.id+"/likes/").once("value",function(b){b.hasChild(c.toString())?a.Firebase.child("users/"+a.User.id+"/likes/"+c).remove():a.Firebase.child("users/"+a.User.id+"/likes/"+c).set(!0)})},g=function(b,c){b.toggleActionStatus("favorite"),a.Firebase.child("tools/"+c).once("value",function(d){var e=d.val().favorites,f=e;b.hasClass("favorited")?f++:f--,f=0>f?0:f,b.find("span").text(f),a.Firebase.child("tools/"+c+"/favorites/").set(f)}),a.Firebase.child("users/"+a.User.id+"/favorites/").once("value",function(b){b.hasChild(c.toString())?a.Firebase.child("users/"+a.User.id+"/favorites/"+c).remove():a.Firebase.child("users/"+a.User.id+"/favorites/"+c).set(!0)})},h=function(a){var b=a.data("url"),c={x:575,y:400},e={x:(d.width()-c.x)/2,y:(d.height()-c.y)/2},f="status=1,width="+c.x+",height="+c.y+",top="+e.y+",left="+e.x;window.open(b,"twitter",f)};switch(c){case"heart":a.Authenticated?f(b,e):B.promptLogin();break;case"favorite":a.Authenticated?g(b,e):B.promptLogin();break;case"share":h(b,e)}},this.updateCategory=function(){a.Tool=null,w.attr("data-active",!1),b('.category-selector[data-filter=".'+a.Category+'"]').attr("data-active",!0),e.attr("data-category","."+a.Category),l.find("#category").text(a.Category),b(".tag-selector").removeClass("visible"),b('.tag-selector[data-filter="'+a.Category+'"]').addClass("visible")},b.fn.categoryUpdateHandler=function(){return this.on("click tap",function(){var c=b(this).data("filter");a.Category=c,B.updateCategory(),B.scrollToTop(function(){Pace.restart()}),B.updateURL()})},this.updateTag=function(){a.Tool=null,x.attr("data-active",!1).hide(),b('.tag-selector[data-category="'+a.Category+'"]').show(),b('.tag-selector[data-category="'+a.Category+'"][data-tag="'+a.Tag+'"]').attr("data-active",!0),l.find("#tag").text("#"+a.Tag.replace("-"," "))},b.fn.tagUpdateHandler=function(){return this.on("click tap",function(){a.Tag=b(this).data("tag"),B.updateTag(),B.scrollToTop(function(){Pace.restart()}),B.updateURL()})},B.sortTools=function(){m.mixItUp("sort",a.Sort+":desc")},b.fn.sortHandler=function(){return b.each(this,function(){b(this).on("click tap",function(c){c.preventDefault();var d=b(this);a.Sort=d.data("sort"),h.attr("data-active",!1),d.attr("data-active",!0),B.sortTools()})})},b.fn.actionHandler=function(){return b.each(this,function(){b(this).on("click tap",function(a){a.preventDefault();var c=b(this),d=c.closest(".tool").data("id"),e=c.data("action");B.performAction(c,e,d)})})},this.modalIsOpen=function(){return"true"===p.data("visible")?!0:!1},this.openModalWindow=function(a,b){B.modalIsOpen()||(p.attr("data-visible","true").addClass("close-modal"),a.attr("data-visible","true"),q.closeModalHandler(),d.on("keyup",function(a){var b=a.which||a.keyCode;27===b&&B.closeModalWindow()})),B.runCallback(b)},B.closeModalWindow=function(){r.attr("data-visible","false"),p.attr("data-visible","false").removeClass("close-modal")},b.fn.closeModalHandler=function(){return this.on("click tap",function(){B.closeModalWindow()})},b.fn.loginHandler=function(){return this.on("click tap",function(){B.openModalWindow(s,function(){f.authHandler()})})},b.fn.logoutHandler=function(){return this.on("click tap",function(){a.Authenticated&&(B.authenticated(!1),location.reload())})},b.fn.authHandler=function(){return this.on("click tap",function(){var c=b(this).data("auth");a.Authenticated?printError("Already logged in as:",authData.twitter.displayName):a.Firebase.authWithOAuthPopup(c,function(a,b){!a&&b&&(B.authenticated(!0,b),location.reload())})})},this.buildPage=function(){return d.on("load hashchange resize",function(b){window.size={x:d.width(),y:d.height()},B.toggleGoogleAds(),"load"===b.type&&(n.on("click tap",function(a){a.preventDefault(),o.toggleClass("visible")}),B.checkURL(function(){g.loginHandler(),i.logoutHandler(),B.loadCategories(function(){a.Category&&B.updateCategory(),a.Tag&&B.updateTag()}),B.loadTools(function(){h.sortHandler(),y.actionHandler(),z.openTool(),m.mixItUp({load:{sort:a.Sort,filter:a.Filter},animation:{enable:!0,effects:"fade scale stagger(10ms)"},selectors:{target:".mix",filter:".tool-filter",sort:".tool-sort"}}).on("mixEnd",function(a,b){var c=b.totalShow;c&&0!=c?A.hide():A.show()}),t.typeWatch({wait:500,captureLength:3,callback:function(b){b?(a.Search=b.replace(/ /g,"-"),a.Search&&""!=a.Seach?(l.find("#category").text("Search"),l.find("#tag").text("#"+a.Search),m.mixItUp("filter","."+a.Search).on("mixEnd",function(a,b){var c=b.totalShow;console.log(c&&0!=c?c+" TOOLS FOUND!":"NO TOOLS FOUND!")})):m.mixItUp("filter",a.Filter)):m.mixItUp("filter",a.Filter)}}),a.Authenticated&&B.showUserLikesAndFavorites()})}),a.Firebase.onAuth(function(b){a.Authenticated=b?!0:!1,a.Authenticated?B.authenticated(!0,b):B.authenticated(!1)})),"hashchange"===b.type&&(b.preventDefault(),B.checkURL(function(){Pace.restart(),a.Category&&B.updateCategory(),a.Tag&&B.updateTag(),B.scrollToTop(function(){m.mixItUp("filter",a.Filter)})}))}),this},this.buildPage()}return new B}()}(window.DevTools=window.DevTools||{},jQuery);