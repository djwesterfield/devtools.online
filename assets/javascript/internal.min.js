window.mobile={android:function(){return navigator.userAgent.match(/Android/i)},blkbry:function(){return navigator.userAgent.match(/BlackBerry/i)},ios:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},ie:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return window.mobile.android()||window.mobile.blkbry()||window.mobile.ios()||window.mobile.ie()}},window.paceOptions={ajax:!0,initialRate:0,startOnPageLoad:!1,target:"#content-header",minTime:1e3,ghostTime:500,eventLag:!0,catchupTime:300,elements:{selectors:[".tool"]}},function(a,b){"use strict";a.counter=0,a.started=!1,a.keyPressed=null,a.combo=[38,38,40,40,37,39,37,39,66,65],a.handler=function(){function c(){var c=this;return this.beginCode=function(b){a.keyPressed=b.which||b.keyCode,a.started||(a.started=38==a.keyPressed?!0:!1),a.started?(a.combo[a.counter]==a.keyPressed?a.counter++:c.startOver(),10==a.counter&&c.easterEgg()):c.startOver()},this.startOver=function(){a.counter=0,a.started=!1,a.keyPressed=null},this.easterEgg=function(){printSuccess("You entered the Konami code!","Easter egg stuff can go here"),c.startOver()},this.listen=function(){return b(document).on("keydown",function(a){c.beginCode(a)}),this},this.listen()}return new c}()}(window.KonamiCode=window.KonamiCode||{},jQuery),function(a,b){"use strict";a.Title="DevTools Online",a.Description="A massive collection of online web development tools",a.Timestamp=+new Date,a.Location="http://localhost/devtools.online/",a.Firebase=new Firebase("https://devtoolsonline.firebaseio.com/"),a.Authenticated,a.User,a.Category="design",a.Filter="all",a.Sort="likes:desc",a.Tag="mobile",a.Search=null,a.Tool=null;var c=(window.mobile.any(),b(window)),d=b("#main"),e=(b("#content"),b("#twitter-login")),f=b("#logout"),g=b(".tool-sort"),h=b("#user-info"),i=b("#user-avatar"),j=b("#user-name"),k=b("#content-header"),l=b("#tools-list"),m=b("#toggle-mobile-menu"),n=b("aside"),o=b("#search-input"),p=b("#category-nav"),l=b("#tools-list"),q=b("#tag-nav"),r=b("#tool-info"),s=null,t=null,u=null,v=null;a.handler=function(){function w(){var w=this;this.promptLogin=function(){alert("Please sign in with your Twitter account first.")};var x=function(a){a=a?a:10;for(var b="",c=0;a>c;c++)b+=Math.floor(9*Math.random()+1);return b},y=function(a){return a.replace(/\s+/g,"-").toLowerCase()},z=function(a){var c="";return b.each(a,function(a,b){c+=b+" "}),c};return this.addNewTool=function(){var b={name:null,hash:null,category:a.Category,tags:a.Tag,url:a.Location,image:"https://placehold.it/1024x720"};if(a.Authenticated){var c=prompt("Name the tool:");if(c){b.name=c,b.hash=y(b.name);var d=prompt("What is the tools category:",b.category);if(d){b.category=d;var e=prompt("Tag this tool:",b.tags);if(e){b.tags=e.split(",");var f=prompt("What is the tools URL:",b.url);if(f){b.url=f;var g=prompt("What is the thumbnail URL:",b.image);g&&(b.image=g,a.Firebase.child("tools/"+x(10)).set({addedBy:a.User.id,name:b.name,hash:b.hash,tags:b.tags,category:b.category,thumbnail:b.image,url:b.url,likes:0,favorites:0}))}}}}}},this.runCallback=function(a){a&&"function"==typeof a&&a()},this.updateURL=function(){var b=a.Category?a.Category+"/":"",c=a.Tag?a.Tag+"/":"",d=a.Tool?a.Tool+"/":"",e=b+c+d;a.Filter="everything"===a.Tag?"."+a.Category+", all":"."+a.Category+"."+a.Tag,window.location.hash="!/"+e,l.mixItUp("filter",a.Filter)},this.checkURL=function(c){if(window.location.hash){var d=window.location.hash.split("/");a.Category=d[1]?d[1].toString():"",a.Tag=d[2]?d[2].toString():"",a.Tool=d[3]?d[3].toString():"",b(".tool-link").each(function(){var c=b(this),d=c.data("tool");c.attr("href",a.Location+"#!/"+a.Category+"/"+a.Tag+"/"+d+"/")}),a.Filter="everything"===a.Tag?"."+a.Category+", all":"."+a.Category+"."+a.Tag,a.Tool?w.loadTool(a.Tool):w.unloadTool()}else window.location.hash="!/development/everything/";w.runCallback(c)},this.loadTool=function(b){w.hideTools(function(){r.addClass("visible")}),a.Firebase.child("tools").orderByChild("hash").equalTo(b).once("value",function(a){console.log("tool found: "+a.val())})},this.unloadTool=function(){r.removeClass("visible")},this.scrollToTop=function(a){var d=c.scrollTop()>0?1e3:0;b("html, body").animate({scrollTop:"0px"},d,function(){w.runCallback(a)})},this.loadCategories=function(c){a.Firebase.child("categories").once("value",function(d){var e=Object.keys(d.val()).length,f=0;b.each(d.val(),function(d,g){f++;var h='<li><a class="category-selector tool-filter pointer" href="'+a.Location+"#!/"+g.hash+'/everything/" data-active="false" data-filter=".'+g.hash+'"><i class="fa fa-'+g.icon+'"></i>'+g.name+"</a></li>";if(p.append(h),g.tags){{g.tags.length}b.each(g.tags,function(c,d){var e="everything"===d.hash?"all, ."+g.hash:"."+g.hash+"."+d.hash;if(0===b('.tag-selector[data-category="'+g.hash+'"][data-tag="'+d.hash+'"]').length){var f='<li><a class="tag-selector pointer tool-filter" href="'+a.Location+"#!/"+g.hash+"/"+d.hash+'/" data-active="false" data-category="'+g.hash+'" data-filter="'+e+'" data-tag="'+d.hash+'"><label>'+d.name+"<span>0</span></label></a></li>";q.append(f),t=b(".tag-selector")}})}f>=e&&(s=b(".category-selector"),w.runCallback(c))})})},this.hideTools=function(a){l.mixItUp("filter","none",function(){w.runCallback(a)})},b.fn.openTool=function(){return this.on("click",function(){var c=b(this),d=(c.closest(".tool").data("id"),c.closest(".tool").data("hash"));a.Tool=d,w.loadTool(a.Tool)})},this.loadTools=function(c){a.Firebase.child("tools").once("value",function(d){var e=Object.keys(d.val()).length,f=0;b.each(d.val(),function(d,g){a.Firebase.child("users/"+g.addedBy).once("value",function(h){f++;var i=(h.val().devtools_data.displayName,g.info?g.info:"Update me"),j=g.info?g.info:g.name,k=z(g.tags),m=function(){var c="";return b.each(g.tags,function(b,d){c+='<a class="tool-filter" data-filter=".'+g.category+"."+d+'" href="'+a.Location+"#!/"+g.category+"/"+d+'/">#'+d+"</a>"}),c},n=g.likes<1?"Be the first to like this tool":"Like this tool",o=encodeURIComponent(i.trim()),p='<li class="mix '+g.category+" "+k+" "+g.hash+'" data-likes="'+g.likes+'" data-saves="'+g.favorites+'"><div class="tool" data-id="'+d+'" data-hash="'+g.hash+'" data-category="'+g.category+'" data-tags="'+g.tags+'">';p+='<div class="thumbnail" style=background-image:url('+g.thumbnail+');"">',p+='<div class="thumb-actions">',p+='<a title="'+g.url+'" href="'+g.url+'?ref=devtools" rel="external" target="new"><i class="fa fa-link"></i></a>',p+='<a class="more-info tool-link" data-tool="'+g.hash+'" href="'+a.Location+"#!/"+a.Category+"/"+a.Tag+"/"+g.hash+'/" title="More information about '+g.name+'"><i class="fa fa-info"></i></a>',p+="</div>",p+='<!-- <img alt="'+j+'" src="'+g.thumbnail+'"> -->',p+="</div>",p+='<div class="details">',p+='<h2><a class="tool-link" href="'+g.url+'?ref=devtools" rel="external" target="new" title="'+g.url+'">'+g.name+"</a></h2>",p+="<p>"+m()+"</p>",p+='<p class="short-description edit-desc" title="'+i+'">'+i+"</p>",p+="</div>",p+='<nav class="actions">',p+='<li title="'+n+'"><button class="tool-action" data-action="heart"><i class="heart"></i><span>'+g.likes+"</span></button></li>",p+='<li title="Add this tool to your favorites"><button class="tool-action" data-action="favorite"><i class="fa fa-bookmark-o"></i><span>'+g.favorites+"</span></button></li>",p+='<li title="Share this tool online"><button class="tool-action" data-action="share" data-url="http://twitter.com/share?text='+o+"&url="+g.url+'?ref=devtools"><i class="fa fa-share-alt"></i><span>Share</span></button></li>',p+="</nav>",p+="</div></li>",l.append(p),Pace.restart(),f>=e&&(u=b(".tool-action"),v=b(".more-info"),w.runCallback(c))})})})},this.showUserLikesAndFavorites=function(){a.Authenticated&&(console.log("Authenticated: "+a.User.id),a.Firebase.child("users/"+a.User.id).once("value",function(a){var c=a.val().likes,d=a.val().favorites;c&&(console.log("show user likes:"),b.each(c,function(a){console.log(a),b('.tool[data-id="'+a+'"]').find('.tool-action[data-action="heart"]').toggleActionStatus("like")})),d&&b.each(d,function(a){b('.tool[data-id="'+a+'"]').find('.tool-action[data-action="favorite"]').toggleActionStatus("favorite")})}))},this.authenticated=function(b,c){switch(e.hide(),f.hide(),b){case!0:a.Authenticated=!0,a.User=c.twitter,e.hide(),f.show(),j.text(c.twitter.displayName),i.attr("src",c.twitter.profileImageURL),h.show(),w.showUserLikesAndFavorites(),a.Firebase.child("users/"+c.twitter.id).once("value",function(b){b.exists()||a.Firebase.child("users/"+c.twitter.id).set({devtools_data:{level:0,username:c.twitter.username,displayName:c.twitter.displayName,avatar:c.twitter.profileImageURL},twitter_data:{username:c.twitter.username,displayName:c.twitter.displayName,avatar:c.twitter.profileImageURL}})});break;default:h.hide(),j.text(""),i.attr("src",""),f.hide(),e.show(),a.Firebase.unauth(),a.Authenticated=!1,a.User=null,w.clearLikesAndFavorites()}},this.addNewCategory=function(){var b=prompt("Name the category:");b&&a.Firebase.child("categories/"+x(10)).set({name:b,hash:y(b),icon:"circle-o"})},this.addNewTag=function(){console.log(a.Category);var c=prompt("Name the tag:");c&&a.Firebase.child("categories").orderByChild("hash").equalTo(a.Category).once("value",function(d){b.each(d.val(),function(b){a.Firebase.child("categories/"+b+"/tags/"+x(10)).set({name:c,hash:y(c)})})})},this.clearLikesAndFavorites=function(){console.log("Likes and favorites have been cleared"),u.removeClass("liked").removeClass("favorited"),b('.tool-action[data-action="heart"] .fa').removeClass("fa-heart").addClass("fa-heart-o"),b('.tool-action[data-action="favorite"] .fa').removeClass("fa-star").addClass("fa-star-o")},b.fn.toggleActionStatus=function(a){var c=b(this);switch(a){case"like":c.toggleClass("liked"),c.find(".heart").toggleClass("throb");break;case"favorite":c.toggleClass("favorited"),c.find(".fa").toggleClass("fa-bookmark-o").toggleClass("fa-bookmark");break;case"share":alert("SHARED!")}},this.performAction=function(b,d,e){var f=function(b,c){b.toggleActionStatus("like"),a.Firebase.child("tools/"+c).once("value",function(d){var e=d.val().likes,f=e;b.hasClass("liked")?f++:f--,f=0>f?0:f,b.find("span").text(f),a.Firebase.child("tools/"+c+"/likes/").set(f)}),a.Firebase.child("users/"+a.User.id+"/likes/").once("value",function(b){b.hasChild(c.toString())?a.Firebase.child("users/"+a.User.id+"/likes/"+c).remove():a.Firebase.child("users/"+a.User.id+"/likes/"+c).set(!0)})},g=function(b,c){b.toggleActionStatus("favorite"),a.Firebase.child("tools/"+c).once("value",function(d){var e=d.val().favorites,f=e;console.log(e),b.hasClass("favorited")?f++:f--,f=0>f?0:f,b.find("span").text(f),a.Firebase.child("tools/"+c+"/favorites/").set(f)}),a.Firebase.child("users/"+a.User.id+"/favorites/").once("value",function(b){b.hasChild(c.toString())?a.Firebase.child("users/"+a.User.id+"/favorites/"+c).remove():a.Firebase.child("users/"+a.User.id+"/favorites/"+c).set(!0)})},h=function(a){var b=a.data("url"),d={x:575,y:400},e={x:(c.width()-d.x)/2,y:(c.height()-d.y)/2},f="status=1,width="+d.x+",height="+d.y+",top="+e.y+",left="+e.x;window.open(b,"twitter",f)};switch(d){case"heart":a.Authenticated?f(b,e):w.promptLogin();break;case"favorite":a.Authenticated?g(b,e):w.promptLogin();break;case"share":h(b,e)}},this.updateCategory=function(){a.Tool=null,s.attr("data-active",!1),b('.category-selector[data-filter=".'+a.Category+'"]').attr("data-active",!0),d.attr("data-category","."+a.Category),k.find("#category").text(a.Category),b(".tag-selector").removeClass("visible"),b('.tag-selector[data-filter="'+a.Category+'"]').addClass("visible")},b.fn.categoryUpdateHandler=function(){return this.on("click tap",function(){var c=b(this).data("filter");a.Category=c,w.updateCategory(),w.scrollToTop(function(){Pace.restart()}),w.updateURL()})},this.updateTag=function(){a.Tool=null,t.attr("data-active",!1).hide(),b('.tag-selector[data-category="'+a.Category+'"]').show(),b('.tag-selector[data-category="'+a.Category+'"][data-tag="'+a.Tag+'"]').attr("data-active",!0),console.log("Cat: "+a.Category),console.log("Tag: "+a.Tag),console.log("\r\n"),k.find("#tag").text("#"+a.Tag.replace("-"," "))},b.fn.tagUpdateHandler=function(){return this.on("click tap",function(){a.Tag=b(this).data("tag"),w.updateTag(),w.scrollToTop(function(){Pace.restart()}),w.updateURL()})},w.sortTools=function(){l.mixItUp("sort",a.Sort+":desc")},b.fn.sortHandler=function(){return b.each(this,function(){b(this).on("click tap",function(c){c.preventDefault();var d=b(this);a.Sort=d.data("sort"),g.attr("data-active",!1),d.attr("data-active",!0),w.sortTools()})})},b.fn.actionHandler=function(){return b.each(this,function(){b(this).on("click tap",function(a){a.preventDefault();var c=b(this),d=c.closest(".tool").data("id"),e=c.data("action");w.performAction(c,e,d)})})},b.fn.logoutHandler=function(){return this.on("click tap",function(){a.Authenticated?(w.authenticated(!1),printSuccess("Success:","You have been logged out")):printError("Error logging out:","Not logged in")})},b.fn.loginHandler=function(){return this.on("click tap",function(){a.Authenticated?printError("Already logged in as:",authData.twitter.displayName):a.Firebase.authWithOAuthPopup("twitter",function(a,b){!a&&b?(w.authenticated(!0,b),printSuccess("Successfully logged in:",b.twitter.displayName)):(w.authenticated(!1),printError("Authentication error:",a))})})},this.buildPage=function(){return c.on("load hashchange resize",function(c){"load"===c.type&&(b("a").on("click",function(a){a.preventDefault()}),m.on("click",function(a){a.preventDefault(),n.toggleClass("visible")}),w.checkURL(function(){h.logoutHandler(),e.loginHandler(),w.loadCategories(function(){a.Category&&w.updateCategory(),a.Tag&&w.updateTag(),b("#add-tag").on("click",function(){w.addNewTag()}),b("#add-tool").on("click",function(){w.addNewTool()})}),w.loadTools(function(){g.sortHandler(),u.actionHandler(),v.openTool(),b(".edit-desc").on("click",function(){if(a.Authenticated){var c=b(this).closest(".tool").data("id"),d=b(this).text(),e=prompt("Write a short description for this tool:",d);e&&a.Firebase.child("tools/"+c+"/info").set(e)}else w.promptLogin()}),l.mixItUp({load:{sort:a.Sort,filter:a.Filter},selectors:{target:".mix",filter:".tool-filter",sort:".tool-sort"}}),o.typeWatch({wait:500,captureLength:3,callback:function(b){a.Search=b.replace(/ /g,", ."),a.Search&&""!=a.Seach?(l.mixItUp("filter","."+a.Search),k.find("#category").text("Search"),k.find("#tag").text("#"+a.Search)):l.mixItUp("filter",a.Filter)}})})}),a.Firebase.onAuth(function(b){a.Authenticated=b?!0:!1,a.Authenticated?(w.authenticated(!0,b),printSuccess("Authenticated user:",b.twitter.displayName)):w.authenticated(!1)})),"hashchange"===c.type&&(c.preventDefault(),w.checkURL(function(){Pace.restart(),a.Category&&w.updateCategory(),a.Tag&&w.updateTag(),console.log(a.Filter),l.mixItUp("filter",a.Filter)}))}),this},this.buildPage()}return new w}()}(window.DevTools=window.DevTools||{},jQuery);